/* ===========================
   Contacts Page (Fixed Layout)
   =========================== */

.contacts-page {
  width: 100%;
  height: 100%;
  min-height: 0;

  display: flex;
  flex-direction: column;
  overflow: hidden;

  background-color: var(--bg-secondary);
  box-sizing: border-box;
}

/* Prevent global scrolling to avoid double scrollbars */
body:has(.contacts-page) .app-container .content {
  overflow: hidden !important;
}

/* Remove card wrapper - use page as container */
.contacts-page .contact-container {
  flex: 1 1 auto;
  min-height: 0;

  display: flex;
  flex-direction: column;
  overflow-y: auto;

  background: transparent;
  box-sizing: border-box;
}

/* Sticky header at top of scrollable area - matches project details h1 exactly */
.contacts-page .contact-header h1 {
  position: sticky !important;
  top: 0 !important;
  background-color: var(--bg-secondary) !important;
  z-index: 10 !important;
  padding: var(--space-3) 0 var(--space-4) 0 !important;
  margin: 0 !important;
}

/* Shadow gradient below sticky header - hidden by default */
.contacts-page .contact-header h1::after {
  content: '' !important;
  position: absolute !important;
  bottom: calc(var(--space-4) * -1) !important;
  left: 0 !important;
  right: 0 !important;
  height: 16px !important;
  background: linear-gradient(to bottom, rgba(0, 0, 0, 0.1), transparent) !important;
  pointer-events: none !important;
  opacity: 0 !important;
  transition: opacity 0.3s ease !important;
}

/* Show shadow gradient when scrolled down */
.contacts-page .contact-container:not(.scrolled-to-top) .contact-header h1::after {
  opacity: 1 !important;
}

/* The list scrolls with the container */
.contacts-page .contact-list {
  flex: 1 1 auto;
  min-height: 0;

  padding: var(--space-4) var(--space-5);
  display: flex;
  flex-direction: column;
  gap: var(--space-3);
}

/* Contact rows */
.contacts-page .contact-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--space-3);

  padding: var(--space-3) var(--space-4);

  border: 1px solid var(--border-color);
  border-radius: var(--border-radius);

  background: var(--bg-primary);
  box-shadow: var(--shadow-sm);

  transition: transform var(--transition-fast), background var(--transition-fast);
}

.contacts-page .contact-item:hover {
  transform: translateY(-1px);
  background: var(--bg-secondary);
}

/* Left side (avatar + info) */
.contacts-page .contact-info {
  display: flex;
  align-items: center;
  gap: var(--space-3);
  min-width: 0;
}

.contacts-page .contact-avatar {
  width: 40px;
  height: 40px;
  border-radius: 999px;

  display: inline-flex;
  align-items: center;
  justify-content: center;

  background: var(--accent-secondary);
  color: var(--white);
  font-weight: var(--font-weight-bold);
  flex: 0 0 auto;
}

.contacts-page .contact-text {
  display: flex;
  flex-direction: column;
  min-width: 0;
}

.contacts-page .contact-name {
  font-weight: var(--font-weight-bold);
  color: var(--text-primary);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.contacts-page .contact-email {
  font-size: var(--font-size-sm);
  color: var(--text-secondary);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.contacts-page .contact-role {
  font-size: var(--font-size-xs);
  color: var(--text-tertiary);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* Right side actions */
.contacts-page .contact-actions {
  display: flex;
  gap: var(--space-2);
  flex: 0 0 auto;
}

.contacts-page .contact-actions button {
  border: 1px solid var(--border-color);
  background: var(--bg-primary);
  color: var(--text-primary);

  padding: var(--space-2) var(--space-3);
  border-radius: var(--border-radius);
  cursor: pointer;

  transition: background var(--transition-fast), transform var(--transition-fast);
}

.contacts-page .contact-actions button:hover {
  background: var(--bg-secondary);
  transform: translateY(-1px);
}

.contacts-page .contact-actions button:active {
  transform: translateY(0);
}

/* Mobile topbar mode - flush layout like project-details */
@media (max-width: 600px) {
  /* Allow the page to scroll naturally */
  body.has-topbar .contacts-page {
    overflow-y: auto !important;
    height: 100% !important;
    display: block !important;
  }
  
  /* Reset fixed positioning on container */
  body.has-topbar .contacts-page .contact-container {
    position: relative !important;
    top: auto !important;
    bottom: auto !important;
    left: auto !important;
    right: auto !important;
    width: 100% !important;
    max-width: 100% !important;
    height: auto !important;
    overflow-y: visible !important;
    margin: 0 !important;
    padding: 0 !important;
    /* Add bottom padding for footer */
    padding-bottom: calc(var(--footer-height, 60px) + var(--space-4)) !important;
  }

  /* Sticky header adjustment for mobile topbar */
  body.has-topbar .contacts-page .contact-header h1 {
    position: sticky !important;
    top: calc(var(--navbar-height-mobile, 56px) + env(safe-area-inset-top, 0px)) !important;
    background-color: var(--bg-secondary) !important;
    z-index: 10 !important;
    padding: var(--space-3) 0 var(--space-4) 0 !important;
    margin: 0 !important;
  }

  /* Mobile styling - keep default from above */
  body.has-topbar .contacts-page .contact-list {
    padding: var(--space-4) var(--space-4);
  }

  body.has-topbar .contacts-page .contact-item {
    padding: var(--space-3);
  }
}
